

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building conda packages with conda skeleton &mdash; Conda   documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Conda   documentation" href="../index.html"/>
        <link rel="up" title="Build tutorials" href="build_tutorials.html"/>
        <link rel="next" title="Building conda packages from scratch" href="pkgs2.html"/>
        <link rel="prev" title="Build tutorials" href="build_tutorials.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Conda</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../get-started/get-started.html">Get started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../get-started/condaintro.html">Intro to conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install/quick.html">Quick install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/full.html">Full installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/config.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/central.html">Centralized installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using/index.html">Using conda</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../using/using.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/envs.html">Managing environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/py.html">Managing Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/pkgs.html">Managing packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/test-drive.html">Test drive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/cheatsheet.html">Conda cheat sheet</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../building/build.html">Building packages</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="build_tutorials.html">Build tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building/bpp.html">Building conda packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building/custom-channels.html">Custom channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../signed-packages.html">Signing conda packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building/bdist_conda.html">Bdist_conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building/sample-recipes.html">Sample recipes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../commands.html">Command reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../commands.html#conda-general-commands">Conda general commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.html#conda-build-commands">Conda build commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.html#conda-environment-commands">Conda environment commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../get-involved.html">Get involved</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../get-involved.html#join-conda-email-group">Join conda email group</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-involved.html#contribute-recipes-to-github">Contribute recipes to Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-involved.html#report-a-bug">Report a bug</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help/help.html">Get more help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../help/faq.html">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/examples/examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/support.html">Support options</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Conda</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../building/build.html">Building packages</a> &raquo;</li>
      
          <li><a href="build_tutorials.html">Build tutorials</a> &raquo;</li>
      
    <li>Building conda packages with conda skeleton</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://github.com/conda/conda-docs/edit/master/docs/source/build_tutorials/pkgs.rst" class="fa fa-github"> Edit on GitHub</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="building-conda-packages-with-conda-skeleton">
<h1>Building conda packages with conda skeleton<a class="headerlink" href="#building-conda-packages-with-conda-skeleton" title="Permalink to this headline">¶</a></h1>
<p>This tutorial explores building a simple conda package using the conda skeleton command. Building a package
makes it simple to install the program in any location. Many packages can be built using just the conda
skeleton command with a few minor edits. Building conda packages can also be complex, especially if many
dependencies are involved.</p>
<p>TIP: A skeleton command generates a template that may be used as-is or with very few edits. See <a class="reference external" href="https://en.wikipedia.org/wiki/Skeleton_(computer_programming)">skeleton (computer programming)</a>.</p>
<p>This is the first of three tutorials on building conda packages.</p>
<div class="section" id="conda-build-summary">
<h2>Conda build summary<a class="headerlink" href="#conda-build-summary" title="Permalink to this headline">¶</a></h2>
<p>Building a simple conda package can be done in two steps, with two optional steps:</p>
<ol class="arabic simple">
<li>Before you start: make sure you have all the requirements.</li>
<li>Build a simple package with conda skeleton and PyPI: generate a simple package.</li>
<li>Optional - Convert conda package for other platforms: convert your simple package so it can be used on on Linux, OS X and Windows.</li>
<li>Optional - Upload package to Anaconda.org: upload to a public or private repository so others can share your package.</li>
</ol>
<div class="section" id="before-you-start">
<h3>1. Before you start<a class="headerlink" href="#before-you-start" title="Permalink to this headline">¶</a></h3>
<p>You should already have conda and conda-build by downloading and installing Miniconda or Anaconda.
Please follow the Quick Install instructions.</p>
<p><strong>Windows users only:*</strong> install unxutils.</p>
<p>At the command prompt, enter the following:</p>
<div class="highlight-bash"><div class="highlight"><pre>conda install unxutils
</pre></div>
</div>
<p><strong>All users:</strong> next, install conda-build:</p>
<div class="highlight-bash"><div class="highlight"><pre>conda install conda-build
</pre></div>
</div>
<p>Now you are ready to start building your own simple conda package.</p>
</div>
<div class="section" id="build-a-simple-package-with-conda-skeleton-pypi">
<h3>2. Build a simple package with conda skeleton pypi<a class="headerlink" href="#build-a-simple-package-with-conda-skeleton-pypi" title="Permalink to this headline">¶</a></h3>
<p>It is easy to build a skeleton recipe for any Python package that is hosted on PyPI, the official third-party
software repository for the Python programming language.</p>
<p>TIP: The conda skeleton command is also available for CPAN and CRAN repositories. Simply replace “pypi” with the repository name, either “cpan” or “cran.”</p>
<p>Let’s generate a simple conda skeleton recipe for a package named Pyinstrument using existing PyPI metadata.
Building a package will make it simple to install Pyinstrument in any location, especially if we choose to
upload it to Anaconda.org.</p>
<p>Pyinstrument is a Python statistical profiler that records the whole call stack once each millisecond, so
programmers can see which parts of their code are slowest and how to make them faster. More information about
Pyinstrument: <a class="reference external" href="https://github.com/joerick/pyinstrument">https://github.com/joerick/pyinstrument</a></p>
<p>First, in your user home directory, run the conda skeleton command:</p>
<div class="highlight-bash"><div class="highlight"><pre>conda skeleton pypi pyinstrument
</pre></div>
</div>
<p>This creates a directory named pyinstrument and three skeleton files in that directory: meta.yaml, build.sh,
and bld.bat. Use the ‘ls’ command on OS X or Linux or the “dir” command on Windows to verify that these files
have been created.</p>
<p>Next, edit the new 50-line file meta.yaml.  This skeleton file can be fleshed out by filling in settings and
commands, but for pyinstrument, any changes are optional.</p>
<p>What are these three files?</p>
<blockquote>
<div><p><strong>meta.yaml:</strong> Contains all the metadata in the recipe. Only package/name and package/version are required; everything else is optional.</p>
<p><strong>build.sh:</strong> Environment and other variables for Linux and OS X - whether 32 or 64-bit, path info, etc.</p>
<p><strong>bld.bat:</strong> The same environment and other variables for Windows.</p>
</div></blockquote>
<p>Now that you have the skeleton ready, you can use the conda build tool. Let’s try it:</p>
<div class="highlight-bash"><div class="highlight"><pre>conda build pyinstrument
</pre></div>
</div>
<p>When conda-build is finished, it displays the exact path and filename and location.</p>
<p>Linux example file path:</p>
<div class="highlight-bash"><div class="highlight"><pre>/home/jsmith/miniconda/conda-bld/linux-64/pyinstrument-0.13.1-py27_0.tar.bz2
</pre></div>
</div>
<p>OS X example file path:</p>
<div class="highlight-bash"><div class="highlight"><pre>/Users/jsmith/miniconda/conda-bld/osx-64/pyinstrument-0.13.1-py27_0.tar.bz2
</pre></div>
</div>
<p>Windows example file path:</p>
<div class="highlight-none"><div class="highlight"><pre>C:\Users\jsmith\Miniconda\conda-bld\win-64\pyinstrument-0.13.1-py27_0.tar.bz2
</pre></div>
</div>
<p>NOTE: Your path and filename will vary depending on your installation and operating system. Save the
path and filename information for the next step.</p>
<p>Now you can install your newly-built program on your local computer by using the use-local flag:</p>
<div class="highlight-bash"><div class="highlight"><pre>conda install --use-local pyinstrument
</pre></div>
</div>
<p>Now verify that Pyinstrument installed successfully:</p>
<div class="highlight-bash"><div class="highlight"><pre>conda list
</pre></div>
</div>
</div>
<div class="section" id="convert-conda-package-for-other-platforms">
<h3>3. Convert conda package for other platforms<a class="headerlink" href="#convert-conda-package-for-other-platforms" title="Permalink to this headline">¶</a></h3>
<p>Now that you have built a package for your current platform with conda build, you can convert it for use on other platforms with the conda convert command and a platform specifier from the list {osx-64,linux-32,linux-64,win-32,win-64,all}. In the output directory, one folder will be created for each of the one or more platforms you chose, and each folder will contain a .tar.bz2 package file for that platform.</p>
<p>Linux and OS X users:</p>
<div class="highlight-bash"><div class="highlight"><pre>conda convert --platform all /home/jsmith/miniconda/conda-bld/linux-64/pyinstrument-0.13.1-py27_0.tar.bz2 -o outputdir/
</pre></div>
</div>
<p>NOTE: Change your path and filename to the exact path and filename you saved in Step 2.</p>
<p>Windows users:</p>
<div class="highlight-bash"><div class="highlight"><pre>conda convert -f --platform all C:<span class="se">\U</span>sers<span class="se">\j</span>smith<span class="se">\M</span>iniconda<span class="se">\c</span>onda-bld<span class="se">\w</span>in-64<span class="se">\p</span>yinstrument-0.13.1-py27_0.tar.bz2 -o outputdir<span class="se">\</span>
</pre></div>
</div>
<p>NOTE: Change your path and filename to the exact path and filename you saved in Step 2.</p>
</div>
<div class="section" id="optional-upload-packages-to-anaconda-org">
<h3>4. Optional - Upload packages to Anaconda.org<a class="headerlink" href="#optional-upload-packages-to-anaconda-org" title="Permalink to this headline">¶</a></h3>
<p>Anaconda.org, formerly known as binstar.org, is a repository for public or private packages. Uploading to Anaconda.org allows you to easily install
your package in any environment with just the conda install command, rather than manually copying or moving
the tarball file from one location to another. You can choose to make your files public or private. For more
info about Anaconda.org visit the Anaconda.org documentation page.</p>
<p>Open a free Anaconda.org account and record your new Anaconda.org username and password.
Next, run <tt class="docutils literal"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">binstar</span></tt> and enter your Anaconda.org username and password.
Next, log into your Anaconda.org account with the command:</p>
<p><tt class="docutils literal"><span class="pre">binstar</span> <span class="pre">login</span></tt></p>
<p>Now you can upload the new local packages to Anaconda.org, as in this example:</p>
<p><tt class="docutils literal"><span class="pre">binstar</span> <span class="pre">upload</span> <span class="pre">/home/jsmith/miniconda/conda-bld/linux-64/pyinstrument-0.12-py27_0.tar.bz</span></tt></p>
<p>NOTE: Change your path and filename to the exact path and filename you saved in Step 2.</p>
<p>TIP: If you want to always automatically upload a successful build to Anaconda.org, run:</p>
<p><tt class="docutils literal"><span class="pre">conda</span> <span class="pre">config</span> <span class="pre">--set</span> <span class="pre">binstar_upload</span> <span class="pre">yes</span></tt></p>
<p>You can log out of your Anaconda.org account with the command:</p>
<p><tt class="docutils literal"><span class="pre">binstar</span> <span class="pre">logout</span></tt></p>
<p>For more information about Anaconda.org, see the <a class="reference external" href="http://docs.anaconda.org/">Anaconda.org documentation page</a>.</p>
<p>Please see our next tutorial, <a class="reference internal" href="pkgs2.html"><em>Building conda packages from scratch</em></a>, to learn more about the files that
go into each conda build and how to edit them manually.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pkgs2.html" class="btn btn-neutral float-right" title="Building conda packages from scratch">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="build_tutorials.html" class="btn btn-neutral" title="Build tutorials"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Continuum Analytics.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:' ',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-11', 'auto');
  ga('send', 'pageview');

</script>


</body>
</html>