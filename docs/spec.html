

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Conda package specification &mdash; Conda   documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Conda   documentation" href="index.html"/>
        <link rel="next" title="Building Python packages" href="bdist_conda.html"/>
        <link rel="prev" title="conda skeleton pypi" href="commands/build/conda-skeleton-pypi.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Conda</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#conda-overview">Conda Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install/install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install/full.html">Full Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/quick.html">Quick Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/config.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/central.html">Centralized installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/silent.html">Silent installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test-drive.html">Conda test drive</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test-drive.html#managing-conda">1. Managing conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-drive.html#managing-environments">2. Managing environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-drive.html#managing-python">3. Managing Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-drive.html#managing-packages">4. Managing packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-drive.html#removing-packages-environments-or-conda">5. Removing packages, environments, or conda</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="py2or3.html">Create Python 2 or 3 environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Conda Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="building/build.html">Building packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="building/pkg-name-conv.html">Package Naming Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="building/meta-pkg.html">Metapackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="building/dirs.html">Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="build.html">conda build Recipe Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build_tutorials.html">Build tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_tutorials/pkgs.html">Tutorial: Intro to building conda packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_tutorials/pkgs2.html">Tutorial: Building conda packages part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_tutorials/postgis.html">Tutorial: Building the postgis package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom-channels.html">Custom Channels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom-channels.html#custom-channel-private-repository-summary">Custom channel/private repository summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="get-involved.html">Get involved</a><ul>
<li class="toctree-l2"><a class="reference internal" href="get-involved.html#join-a-conda-mailing-list">Join a conda mailing list</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-involved.html#contribute-recipes-to-github">Contribute recipes to Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-involved.html#report-a-bug">Report a bug</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="help/help.html">Get more help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="help/faq.html">Conda FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="help/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="help/conda-pip-virtualenv-translator.html">conda vs. pip vs. virtualenv</a></li>
<li class="toctree-l2"><a class="reference internal" href="help/examples/examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="help/travis.html">Using Conda with Travis CI</a></li>
<li class="toctree-l2"><a class="reference internal" href="help/support.html">Support options</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="commands.html">Command Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="commands.html#general-commands"><tt class="docutils literal"><span class="pre">general-commands</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html#env-commands"><tt class="docutils literal"><span class="pre">env-commands</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html#build-commands"><tt class="docutils literal"><span class="pre">build-commands</span></tt></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="general-commands.html">General conda commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-bundle.html">conda bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-clean.html">conda clean</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-config.html">conda config</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-create.html">conda create</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-help.html">conda help</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-info.html">conda info</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-init.html">conda init</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-install.html">conda install</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-list.html">conda list</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-package.html">conda package</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-remove.html">conda remove</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-run.html">conda run</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-search.html">conda search</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-uninstall.html">conda uninstall</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/conda-update.html">conda update</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="env-commands.html">conda-env commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="commands/env/conda-env.html">conda env</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/env/conda-env-create.html">conda env create</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/env/conda-env-export.html">conda env export</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/env/conda-env-list.html">conda env list</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/env/conda-env-remove.html">conda env remove</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/env/conda-env-update.html">conda env update</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build-commands.html">conda-build commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-build.html">conda build</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-convert.html">conda convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-develop.html">conda develop</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-index.html">conda index</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-inspect.html">conda inspect</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-inspect-linkages.html">conda inspect linkages</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-inspect-objects.html">conda inspect objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-metapackage.html">conda metapackage</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-pipbuild.html">conda pipbuild</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-skeleton.html">conda skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-skeleton-cpan.html">conda skeleton cpan</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-skeleton-cran.html">conda skeleton cran</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/build/conda-skeleton-pypi.html">conda skeleton pypi</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Conda package specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#package-metadata">Package metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#link-and-unlink-scripts">Link and unlink scripts:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#repository-structure-and-index">Repository structure and index</a></li>
<li class="toctree-l2"><a class="reference internal" href="#package-match-specifications">Package Match Specifications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bdist_conda.html">Building Python packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="bdist_conda.html#with-setup-py-bdist-conda">with setup.py bdist_conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="bdist_conda.html#setup-options">Setup options</a></li>
<li class="toctree-l2"><a class="reference internal" href="bdist_conda.html#command-line-options">Command line options</a></li>
<li class="toctree-l2"><a class="reference internal" href="bdist_conda.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License - Conda</a><ul>
<li class="toctree-l2"><a class="reference internal" href="license.html#exceptions">Exceptions</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Conda</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Conda package specification</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://github.com/conda/conda-docs/edit/master/docs/source/spec.rst" class="fa fa-github"> Edit on GitHub</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="conda-package-specification">
<h1>Conda package specification<a class="headerlink" href="#conda-package-specification" title="Permalink to this headline">¶</a></h1>
<p>A conda package is a bzipped tar archive (<tt class="docutils literal"><span class="pre">.tar.bz2</span></tt>) which contains
metadata under the <tt class="docutils literal"><span class="pre">info/</span></tt> directory, and a collection of files which are
installed directly into an install prefix.  The format is identical across
platforms and operating systems.  It is important to note that during the
install process, all files are basically just extracted into the install
prefix, with the exception of the ones in <tt class="docutils literal"><span class="pre">info/</span></tt>.  Installing a conda
package into an environment may be roughly thought of as executing the
following using command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd &lt;environment prefix&gt;
$ tar xjf some-package-1.0-0.tar.bz2
</pre></div>
</div>
<p>However, it should be noted that only files (which includes symbolic
links) are part of a conda package, and not directories.  Directories
are created and removed as needed, but you cannot create an empty directory
from the tar archive directly.</p>
<p>In the following, we describe the precise layout of the metadata contained in
the <tt class="docutils literal"><span class="pre">info/</span></tt> directory and how it relates to the repository index
(<tt class="docutils literal"><span class="pre">repodata.json.bz</span></tt>).</p>
<div class="section" id="package-metadata">
<span id="id1"></span><h2>Package metadata<a class="headerlink" href="#package-metadata" title="Permalink to this headline">¶</a></h2>
<p>All metadata about a package is contained under <tt class="docutils literal"><span class="pre">info/</span></tt>.  Any files within
this location are not installed under the install prefix, and even though a
package creator is free to add any file, conda will only inspect the content
of the following ones:</p>
<p><tt class="docutils literal"><span class="pre">info/index.json</span></tt>: This file contains basic information about the package,
such as name, version, build string, and dependencies.  The content of this
file is what gets stored in the repository index file <tt class="docutils literal"><span class="pre">repodata.json</span></tt> (hence
the name <tt class="docutils literal"><span class="pre">index.json</span></tt>).  The json object is a dictionary containing the
following keys:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">name</span></tt>: string</dt>
<dd>The (lowercase) name of the package.  Note that this string
may contain the <tt class="docutils literal"><span class="pre">-</span></tt> character.</dd>
<dt><tt class="docutils literal"><span class="pre">version</span></tt>: string</dt>
<dd>The package version, which may not contain <tt class="docutils literal"><span class="pre">-</span></tt>.
Conda acknowledges <a class="reference external" href="http://www.python.org/dev/peps/pep-0386/">PEP 386</a>.</dd>
<dt><tt class="docutils literal"><span class="pre">build</span></tt>: string</dt>
<dd>The build string, which also may not contain <tt class="docutils literal"><span class="pre">-</span></tt>.
The filename of the conda package is composed from these
three values, that is <tt class="docutils literal"><span class="pre">&lt;name&gt;-&lt;version&gt;-&lt;build&gt;.tar.bz2</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">build_number</span></tt>: integer</dt>
<dd>A (non-negative) integer representing the build
number of the package.</dd>
<dt><tt class="docutils literal"><span class="pre">depends</span></tt>: list of strings</dt>
<dd>List of dependency specifications, where each element is a string
as outlined in <a class="reference internal" href="#build-version-spec"><em>Package Match Specifications</em></a>.</dd>
<dt><tt class="docutils literal"><span class="pre">arch</span></tt>: string (optional)</dt>
<dd>The architecture the package is built for, e.g. <tt class="docutils literal"><span class="pre">x86_64</span></tt>.
Conda currently does not do anything with this key.</dd>
<dt><tt class="docutils literal"><span class="pre">platform</span></tt>: string (optional)</dt>
<dd>The platform (OS) the package is built for, e.g. <tt class="docutils literal"><span class="pre">osx</span></tt>.
Conda currently does not do anything with this key.  Packages for a
specific architecture and platform are usually distinguished by the
repository sub-directory they are contained in (see below).</dd>
</dl>
</div></blockquote>
<p>The build string is used to differentiate builds of packages with otherwise
the same name and version, e.g. a build with other dependencies (like Python
3.4 instead of Python 2.7), a bug fix in the build process, or some different
optional dependencies (MKL vs. ATLAS linkage), etc.  Nothing in conda actually
inspects the build string&#8212;strings such as <tt class="docutils literal"><span class="pre">np18py34_1</span></tt> are only
designed for human readability, but are never parsed by conda.</p>
<p>Unlike the build sting, the build number is inspected by conda.
It is used to sort packages (with otherwise same name and version) to
determine the latest one.
This is important, because new builds (bug fixes to the way a package is
build) may be added to a repository.</p>
<p><tt class="docutils literal"><span class="pre">info/files</span></tt>: This file lists all files which are part of the package
itself (one per line), i.e. all files which need to get linked into the
environment.  Any files in the package not listed in this file will not be
linked when the package is installed.  The directory delimiter for the files
in <tt class="docutils literal"><span class="pre">info/files</span></tt> should always be <tt class="docutils literal"><span class="pre">/</span></tt>, even on Windows.  This matches the
directory delimiter used in the tarball.</p>
<p><tt class="docutils literal"><span class="pre">info/has_prefix</span></tt>: This optional file lists all files that contain a
hard-coded build prefix or placeholder prefix, which needs to be replaced by
the install prefix at installation time. Note that due to the way the binary
replacement works, the placeholder prefix must be longer than the install
prefix.</p>
<p>Each line of this file should either be a path, in which case it is considered
a text file with the default placeholder, <tt class="docutils literal"><span class="pre">/opt/anaconda1anaconda2anaconda3</span></tt>,
or a space-separated list of <tt class="docutils literal"><span class="pre">placeholder</span></tt>, <tt class="docutils literal"><span class="pre">mode</span></tt>, <tt class="docutils literal"><span class="pre">path</span></tt>, where
<tt class="docutils literal"><span class="pre">placeholder</span></tt> is the build or placeholder prefix, <tt class="docutils literal"><span class="pre">mode</span></tt> is either <tt class="docutils literal"><span class="pre">text</span></tt>
or <tt class="docutils literal"><span class="pre">binary</span></tt>, and <tt class="docutils literal"><span class="pre">path</span></tt> is the relative path of the file to be updated. For
instance, on Linux or OS X</p>
<div class="highlight-python"><div class="highlight"><pre>bin/script.sh
/Users/username/anaconda/envs/_build binary bin/binary
/Users/username/anaconda/envs/_build text share/text
</pre></div>
</div>
<p>or on Windows</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;Scripts/script1.py&quot;
&quot;C:\Users\username\anaconda\envs\_build&quot; text &quot;Scripts/script2.bat&quot;
&quot;C:/Users/username/anaconda/envs/_build&quot; binary &quot;Scripts/binary&quot;
</pre></div>
</div>
<p>Note the directory delimiter for the relative <tt class="docutils literal"><span class="pre">path</span></tt> must always be <tt class="docutils literal"><span class="pre">/</span></tt>,
even on Windows. The placeholder may contain either <tt class="docutils literal"><span class="pre">\</span></tt> or <tt class="docutils literal"><span class="pre">/</span></tt> on Windows;
the replacement prefix will match the delimiter used in the placeholder. (The
default placeholder <tt class="docutils literal"><span class="pre">/opt/anaconda1anaconda2anaconda3</span></tt> is an exception, being
replaced with the install prefix using the native path delimiter.) On Windows,
the <tt class="docutils literal"><span class="pre">placeholder</span></tt> and <tt class="docutils literal"><span class="pre">path</span></tt> always appear in &#8220;quotes&#8221; to support paths
with spaces.</p>
<p><tt class="docutils literal"><span class="pre">info/no_link</span></tt>: This optional file lists all files which cannot be linked
(either soft or hard) into environments, and are copied instead.</p>
</div>
<div class="section" id="link-and-unlink-scripts">
<h2>Link and unlink scripts:<a class="headerlink" href="#link-and-unlink-scripts" title="Permalink to this headline">¶</a></h2>
<p>A couple of scripts may optionally be executed before and after the link
and unlink step.  These scripts are executed in a subprocess by conda,
using <tt class="docutils literal"><span class="pre">/bin/bash</span> <span class="pre">&lt;script&gt;</span></tt> on Unix and <tt class="docutils literal"><span class="pre">%COMSPEC%</span> <span class="pre">/c</span> <span class="pre">&lt;script&gt;</span></tt> on
Windows.  For this to work, there needs to be a convention for the path and
filenames of these scripts.  On Unix we have <tt class="docutils literal"><span class="pre">bin/.&lt;name&gt;-&lt;action&gt;.sh</span></tt>,
and on Windows <tt class="docutils literal"><span class="pre">Scripts/.&lt;name&gt;-&lt;action&gt;.bat</span></tt>, where <tt class="docutils literal"><span class="pre">&lt;name&gt;</span></tt> is the
package name, and <tt class="docutils literal"><span class="pre">&lt;action&gt;</span></tt> is one of the following:</p>
<p><tt class="docutils literal"><span class="pre">pre-link</span></tt>: executed prior to linking, an error causes conda to stop.</p>
<p><tt class="docutils literal"><span class="pre">post-link</span></tt>: executed after linking, when the post-link step fails,
we don&#8217;t write any package metadata and return here.  This way the package
is not considered installed.</p>
<p><tt class="docutils literal"><span class="pre">pre-unlink</span></tt>: executed prior to unlinking, errors are ignored.</p>
<p>For example, when where is a script named <tt class="docutils literal"><span class="pre">/bin/.foo-post-link.sh</span></tt> in the
package <tt class="docutils literal"><span class="pre">foo-1.0-0.tar.bz2</span></tt>, it is executed after the linking is completed.
Moreover, the following environment variables are set while the script is
being executed: <tt class="docutils literal"><span class="pre">PREFIX</span></tt>, <tt class="docutils literal"><span class="pre">PKG_NAME</span></tt>, <tt class="docutils literal"><span class="pre">PKG_VERSION</span></tt></p>
</div>
<div class="section" id="repository-structure-and-index">
<h2>Repository structure and index<a class="headerlink" href="#repository-structure-and-index" title="Permalink to this headline">¶</a></h2>
<p>A conda repository (or channel) is a directory tree, usually served over
HTTPS, which has platform sub-directories, each of which contain conda
packages and a repository index.  The index file <tt class="docutils literal"><span class="pre">repodata.json</span></tt> lists all
conda packages in the platform sub-directory.  The command <tt class="docutils literal"><span class="pre">conda</span> <span class="pre">index</span></tt> can
be used to create such an index from the conda packages within a directory.
It is simple mapping of the full conda package filename to the dictionary
object in <tt class="docutils literal"><span class="pre">info/index.json</span></tt> described in the previous section.</p>
<p>In the following example, a repository provides the conda package
<tt class="docutils literal"><span class="pre">misc-1.0-np17py27_0.tar.bz2</span></tt> on 64-bit Linux and 32-bit Windows:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;some path&gt;/linux-64/repodata.json
                     repodata.json.bz2
                     misc-1.0-np17py27_0.tar.bz2
           /win-32/repodata.json
                   repodata.json.bz2
                   misc-1.0-np17py27_0.tar.bz2
</pre></div>
</div>
<p>Note that both conda packages have identical filenames, and are only
distinguished by the repository sub-directory they are contained in.</p>
</div>
<div class="section" id="package-match-specifications">
<span id="build-version-spec"></span><h2>Package Match Specifications<a class="headerlink" href="#package-match-specifications" title="Permalink to this headline">¶</a></h2>
<p>Note that this is not the same as the syntax used at the command line with
conda install (like <tt class="docutils literal"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">python=3.4</span></tt>). Internally, conda
translates the command line syntax to the spec defined below (for example,
<tt class="docutils literal"><span class="pre">python=3.4</span></tt> is translated to <tt class="docutils literal"><span class="pre">python</span> <span class="pre">3.4*</span></tt>).</p>
<p>Package dependencies are specified using a match specification.  A match
specification a space separated string of 1, 2 or 3 parts:</p>
<ul>
<li><p class="first">The first part is always the (exact) name of the package.</p>
</li>
<li><p class="first">The second part refers to the version, and may contain special
characters.</p>
<p><tt class="docutils literal"><span class="pre">|</span></tt> means &#8220;or&#8221;, e.g. <tt class="docutils literal"><span class="pre">1.0|1.2</span></tt> matches either version 1.0 or 1.2</p>
<p><tt class="docutils literal"><span class="pre">*</span></tt> matches zero or more characters in the version string. In terms of
regular expressions, it is the same as <tt class="docutils literal"><span class="pre">r'.*'</span></tt>.</p>
<p>For example, <tt class="docutils literal"><span class="pre">1.0|1.4*</span></tt>  matches 1.0, 1.4, 1.4.1b2, but not 1.2</p>
<p><tt class="docutils literal"><span class="pre">&lt;</span></tt>, <tt class="docutils literal"><span class="pre">&gt;</span></tt>, <tt class="docutils literal"><span class="pre">&lt;=</span></tt>, <tt class="docutils literal"><span class="pre">&gt;=</span></tt>, <tt class="docutils literal"><span class="pre">==</span></tt> and <tt class="docutils literal"><span class="pre">!=</span></tt> are relational operators on
versions, which are compared using [PEP
386](<a class="reference external" href="http://legacy.python.org/dev/peps/pep-0386/">http://legacy.python.org/dev/peps/pep-0386/</a>).  For example, <tt class="docutils literal"><span class="pre">&lt;=1.0</span></tt>
matches <tt class="docutils literal"><span class="pre">0.9</span></tt>, <tt class="docutils literal"><span class="pre">0.9.1</span></tt>, and <tt class="docutils literal"><span class="pre">1.0</span></tt>, but not <tt class="docutils literal"><span class="pre">1.0.1</span></tt>. <tt class="docutils literal"><span class="pre">==</span></tt> and
<tt class="docutils literal"><span class="pre">!=</span></tt> are exact equality,</p>
<p><tt class="docutils literal"><span class="pre">,</span></tt> means &#8220;and&#8221;, e.g., <tt class="docutils literal"><span class="pre">&gt;=2,&lt;3</span></tt> matches all packages in the &#8220;2&#8221; series,
e.g., <tt class="docutils literal"><span class="pre">2.0</span></tt>, <tt class="docutils literal"><span class="pre">2.1</span></tt>, and <tt class="docutils literal"><span class="pre">2.9</span></tt> all match, but <tt class="docutils literal"><span class="pre">3.0</span></tt> and <tt class="docutils literal"><span class="pre">1.0</span></tt> do
not.</p>
<p><tt class="docutils literal"><span class="pre">,</span></tt> has higher precedence than <tt class="docutils literal"><span class="pre">|</span></tt>, i.e., <tt class="docutils literal"><span class="pre">&gt;=1,&lt;2|&gt;3</span></tt> means &#8220;(greater
than or equal to 1 and less than 2) or (greater than 3),&#8221; which matches
<tt class="docutils literal"><span class="pre">1</span></tt>, <tt class="docutils literal"><span class="pre">1.3</span></tt>, and <tt class="docutils literal"><span class="pre">3.0</span></tt>, but not <tt class="docutils literal"><span class="pre">2.2</span></tt>.</p>
<p>Conda parses the version by splitting it into parts separated by <tt class="docutils literal"><span class="pre">|</span></tt>. If
the part begins with <tt class="docutils literal"><span class="pre">&lt;</span></tt>, <tt class="docutils literal"><span class="pre">&gt;</span></tt>, <tt class="docutils literal"><span class="pre">=</span></tt>, or <tt class="docutils literal"><span class="pre">!</span></tt>, it is parsed as a
relational operator. Otherwise, it is parsed as a version, possibly
containing the <tt class="docutils literal"><span class="pre">*</span></tt> operator.</p>
</li>
<li><p class="first">The third part is always the (exact) build string.  When there are 3
parts, the second part has to be the exact version.</p>
</li>
</ul>
<p>Remember that the version specification cannot contain spaces, as spaces are
used to delimit the package, version, and build string in the whole match
specification. <tt class="docutils literal"><span class="pre">python</span> <span class="pre">&gt;=</span> <span class="pre">2.7</span></tt> is an invalid match
specification. Furthermore, <tt class="docutils literal"><span class="pre">python&gt;=2.7</span></tt> will be matched as any version of
a package named &#8220;python&gt;=2.7&#8221;.</p>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>The following are all valid match specifications for numpy-1.8.1-py27_0:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">numpy</span></tt></li>
<li><tt class="docutils literal"><span class="pre">numpy</span> <span class="pre">1.8*</span></tt></li>
<li><tt class="docutils literal"><span class="pre">numpy</span> <span class="pre">1.8.1</span></tt></li>
<li><tt class="docutils literal"><span class="pre">numpy</span> <span class="pre">&gt;=1.8</span></tt></li>
<li><tt class="docutils literal"><span class="pre">numpy</span> <span class="pre">==1.8.1</span></tt></li>
<li><tt class="docutils literal"><span class="pre">numpy</span> <span class="pre">1.8|1.8*</span></tt></li>
<li><tt class="docutils literal"><span class="pre">numpy</span> <span class="pre">&gt;=1.8,&lt;2</span></tt></li>
<li><tt class="docutils literal"><span class="pre">numpy</span> <span class="pre">&gt;=1.8,&lt;2|1.9</span></tt></li>
<li><tt class="docutils literal"><span class="pre">numpy</span> <span class="pre">1.8.1</span> <span class="pre">py27_0</span></tt></li>
</ul>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="bdist_conda.html" class="btn btn-neutral float-right" title="Building Python packages">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="commands/build/conda-skeleton-pypi.html" class="btn btn-neutral" title="conda skeleton pypi"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Continuum Analytics.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:' ',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-11', 'auto');
  ga('send', 'pageview');

</script>


</body>
</html>